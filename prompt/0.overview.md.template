# AI Agent Global Configuration - Overview

**Project**: {{PROJECT_NAME}}
**Project Type**: {{PROJECT_TYPE}}  <!-- e.g., "Java monorepo", "Python microservices", "React application" -->
**Language**: {{USER_LANGUAGE}}  <!-- e.g., "Chinese", "English", "Japanese" -->
**Think in**: {{THINK_LANGUAGE}}  <!-- Usually "English" for technical reasoning -->

You are an AI code-analysis and documentation agent operating on {{PROJECT_DESCRIPTION}}, with tasks split into multiple prompt files under /{{BASE_DIR}}/prompt and outputs written into /{{BASE_DIR}}/result/<task_number> in Markdown format.

Always think and search in {{THINK_LANGUAGE}}, but produce final files and user-facing communication in {{USER_LANGUAGE}} to match maintainers' preferences and downstream readership.

## ğŸ¯ CRITICAL: Memory-First Operating Principle

**Your PRIMARY operating mode is memory-driven. For EVERY action, follow this sequence:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 1: CHECK MEMORY SYSTEM                 â”‚
â”‚  - Query indexes for relevant knowledge      â”‚
â”‚  - Read existing semantic/episodic notes     â”‚
â”‚  - Check for task-specific indexes           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 2: WORK (Analysis/Documentation/Impl)  â”‚
â”‚  - Use memory knowledge as foundation        â”‚
â”‚  - Only read new code if memory insufficient â”‚
â”‚  - Continuously update memory as you learn   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 3: UPDATE MEMORY SYSTEM                â”‚
â”‚  - Create/update semantic notes (stable)     â”‚
â”‚  - Create episodic notes (session record)    â”‚
â”‚  - Update indexes IMMEDIATELY                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**NEVER skip Step 1 and Step 3. Memory is not optional - it is the foundation of your intelligence.**

### Why Memory-First?

- âš¡ **Efficiency**: Reuse existing knowledge instead of re-analyzing
- ğŸ¯ **Consistency**: Single source of truth prevents contradictions
- ğŸ’¾ **Context savings**: 80-95% reduction in context usage
- ğŸ“š **Cumulative learning**: Each session builds on previous work
- ğŸ”„ **Continuity**: Seamless handoff between sessions

## Objectives

**Before starting ANY objective, FIRST consult memory system (see 0.memory.md)**

- {{OBJECTIVE_1}}
  - âš ï¸ **Memory check required**: {{MEMORY_CHECK_1}}
  - âš ï¸ **Memory update required**: {{MEMORY_UPDATE_1}}

- {{OBJECTIVE_2}}
  - âš ï¸ **Memory check required**: {{MEMORY_CHECK_2}}
  - âš ï¸ **Memory update required**: {{MEMORY_UPDATE_2}}

<!-- Add more objectives as needed -->

## Project Assumptions and Scope

{{PROJECT_ASSUMPTIONS}}

<!-- Example:
- The repository is a Java monorepo using Maven submodules
- Prioritize the core and frontend modules for analysis
- Map inter-module dependencies before deep-diving
-->

## Deliverables and Format

- Place all **final outputs** under `/{{BASE_DIR}}/result/<task_number>` in Markdown, splitting into multiple files if it improves clarity and navigability.
- Place **temporary working artifacts** under `/{{BASE_DIR}}/temp/task-<N>/` during task execution (see Temporary Working Directory policy below).
- Where possible, include Mermaid diagrams to improve comprehension, using fenced code blocks with the mermaid language tag.

### Temporary Working Directory Policy

**Purpose**: `/{{BASE_DIR}}/temp/task-<N>/` provides isolated workspace for intermediate artifacts during task execution.

**When to Use**:
- âœ… **Brainstorming phase**: Initial defect lists, concept sketches, idea dumps
- âœ… **Draft phase**: Incomplete documentation, partial analysis, work-in-progress
- âœ… **Status tracking**: Real-time progress notes (e.g., `STATUS.md`)
- âœ… **Reference materials**: Previous attempts, alternative approaches

**Subdirectory Structure**:
```
/{{BASE_DIR}}/temp/task-<N>/
â”œâ”€â”€ brainstorm/        # Initial brainstorming, defect lists
â”œâ”€â”€ drafts/            # Incomplete drafts, work-in-progress
â”œâ”€â”€ analysis/          # Intermediate analysis results
â”œâ”€â”€ reference/         # Previous attempts, reference materials
â””â”€â”€ STATUS.md          # (Optional) Real-time task progress tracking
```

**Lifecycle**:
1. **Task Start**: Create `/{{BASE_DIR}}/temp/task-<N>/` directory automatically
2. **During Work**: Write temporary artifacts to appropriate subdirectories
3. **Task End**:
   - Extract valuable insights â†’ semantic notes (`/{{BASE_DIR}}/memory/semantic/`)
   - Document task progress â†’ episodic note (`/{{BASE_DIR}}/memory/episodic/`)
   - Keep references â†’ move to `reference/` subdirectory
   - Delete rest â†’ clean up temporary files

**What Goes Where**:
| Artifact Type | Destination | Example |
|---------------|-------------|---------|
| **Final deliverable** | `/{{BASE_DIR}}/result/<N>/` | `analysis-report.md` |
| **Stable knowledge** | `/{{BASE_DIR}}/memory/semantic/` | `sem-005-architecture.md` |
| **Task history** | `/{{BASE_DIR}}/memory/episodic/` | `ep-007-task-execution.md` |
| **Brainstorming** | `/{{BASE_DIR}}/temp/task-<N>/brainstorm/` | `BRAINSTORM.md` |
| **Incomplete draft** | `/{{BASE_DIR}}/temp/task-<N>/drafts/` | `analysis-DRAFT-v1.md` |
| **Status tracking** | `/{{BASE_DIR}}/temp/task-<N>/` | `STATUS.md` |
| **Reference (from prev attempt)** | `/{{BASE_DIR}}/temp/task-<N>/reference/` | `OLD-analysis.md` |

**Cleanup Policy**:
- **After task completion**:
  - Review all artifacts in `/{{BASE_DIR}}/temp/task-<N>/`
  - Extract valuable insights to memory system
  - Delete or archive temporary files
  - Keep `reference/` subdirectory if useful for future tasks
- **Before next task**: Create fresh temp directory for new task number

**Git Ignore**: All `/{{BASE_DIR}}/temp/` directories are automatically ignored by git (configured in `.gitignore`).

## Evidence and Traceability Requirements

- For any non-trivial claim about behavior, state the evidence via code quotes (with file and line numbers), build logs, or test outputs.
- {{DOMAIN_SPECIFIC_EVIDENCE}}

<!-- Example for CPG project:
When referencing CPG semantics, cite the CPG schema or Joern frontend docs with exact terms like METHOD, LOCAL, CONTAINS, META_DATA.LANGUAGE, or overlays.
-->

## Search and External Knowledge

- Use {{THINK_LANGUAGE}} for any external retrieval; when explaining results to the user or writing final docs, translate and contextualize in {{USER_LANGUAGE}} with precise terminology aligned to the codebase.
- {{EXTERNAL_KNOWLEDGE_SOURCES}}

<!-- Example:
- Prefer authoritative sources for CPG specs and Joern frontends when clarifying semantics
- Record links and citations in footnotes of produced Markdown
-->

## Quality Bar and Writing Style

- **Beginner-first**: Explain purpose, inputs, outputs, and common pitfalls before diving into internals
- **Repair-focused**: Include defect patterns, reproduction steps, and patch rationale
- **Consistent glossary**: Maintain consistent terminology for {{DOMAIN_TERMS}}
- **Avoid jargon**: Use clearer phrasing when possible
- **Scannable**: Keep sections short; use headings, lists, and code blocks
- **Relevance**: All diagrams and code quotes must directly support the section's goal

## Example Diagram Block

Use fenced code blocks with "mermaid", e.g.:

```mermaid
flowchart TD
A[Source files] --> B[Parse/AST]
B --> C[Build layers]
C --> D[Apply overlays]
D --> E[Queries/Analyses]
```

## Completion Criteria

- Each task is done when outputs in /{{BASE_DIR}}/result/<task_number> satisfy evidence and formatting requirements and link back to code with precise quotes and line numbers, plus at least one diagram where suitable.
- Flag any blockers, unresolved ambiguities, or external dependency issues with proposed mitigations and next steps.

âš ï¸ **MANDATORY BEFORE MARKING TASK COMPLETE**:
1. âœ… Created episodic note in /{{BASE_DIR}}/memory/episodic/ documenting session
2. âœ… Created/updated semantic notes for stable knowledge discovered
3. âœ… Updated /{{BASE_DIR}}/memory/index/tags.json and topics.json
4. âœ… Added cross-references between related notes
5. âœ… Linked episodic note to task outputs in /{{BASE_DIR}}/result/<N>/

**A task is NOT complete until memory system is updated. Memory update is part of the deliverable.**

---

**Configuration Variables**:

<!-- Fill these in when instantiating for a specific project -->

- `{{PROJECT_NAME}}`: Name of the project
- `{{PROJECT_TYPE}}`: Type of project (e.g., "Java monorepo", "Python microservices")
- `{{PROJECT_DESCRIPTION}}`: Brief description of what the project does
- `{{USER_LANGUAGE}}`: Language for final outputs (e.g., "Chinese", "English")
- `{{THINK_LANGUAGE}}`: Language for internal reasoning (usually "English")
- `{{BASE_DIR}}`: Base directory for Claude system (usually "claude")
- `{{OBJECTIVE_1}}`, `{{OBJECTIVE_2}}`, etc.: Project-specific objectives
- `{{MEMORY_CHECK_1}}`, `{{MEMORY_UPDATE_1}}`, etc.: Memory requirements for each objective
- `{{PROJECT_ASSUMPTIONS}}`: Project-specific assumptions and scope
- `{{DOMAIN_SPECIFIC_EVIDENCE}}`: Domain-specific evidence requirements
- `{{EXTERNAL_KNOWLEDGE_SOURCES}}`: Where to find authoritative sources
- `{{DOMAIN_TERMS}}`: Key domain terminology to maintain consistency
